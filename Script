// main.js â€” Potenciado para Nonoalko ðŸ’¥

// Scroll suave entre secciones
document.querySelectorAll('a[href^="#"]').forEach(enlace => {
  enlace.addEventListener('click', e => {
    e.preventDefault();
    const destino = document.querySelector(enlace.getAttribute('href'));
    destino?.scrollIntoView({ behavior: 'smooth', block: 'start' });
  });
});

// Animaciones al hacer scroll con Intersection Observer
const elementosAnimables = document.querySelectorAll('section, .gallery img, form, .card, .proyecto');
const observer = new IntersectionObserver(entradas => {
  entradas.forEach(({ isIntersecting, target }) => {
    if (isIntersecting) target.classList.add('visible');
  });
}, { threshold: 0.15 });

elementosAnimables.forEach(el => observer.observe(el));

// ConfirmaciÃ³n visual al enviar formulario
document.querySelector('form')?.addEventListener('submit', () => {
  setTimeout(() => {
    alert('ðŸŽ¨ Â¡Gracias por tu encargo, artista! Pronto tendrÃ¡s noticias nuestras.');
  }, 300);
});

// GalerÃ­a responsiva con efecto fadeIn
function ajustarGaleria() {
  const columnas = window.innerWidth < 600 ? 1 : window.innerWidth < 900 ? 2 : 3;
  const galeria = document.querySelector('.gallery');
  if (galeria) {
    galeria.style.gridTemplateColumns = `repeat(${columnas}, 1fr)`;
  }
}
window.addEventListener('resize', ajustarGaleria);
document.addEventListener('DOMContentLoaded', ajustarGaleria);

// ðŸŒ— Alternador de tema con preferencia guardada
const btnTema = document.querySelector('#modo-tema');
const body = document.body;

// Detectar preferencia del sistema
const temaInicial = localStorage.getItem('tema') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'oscuro' : 'claro');
if (temaInicial === 'oscuro') body.classList.add('modo-oscuro');

btnTema?.addEventListener('click', () => {
  const modoActual = body.classList.toggle('modo-oscuro');
  localStorage.setItem('tema', modoActual ? 'oscuro' : 'claro');
});
